{"ast":null,"code":"import { select } from '@ngrx/store';\nimport { BehaviorSubject } from 'rxjs';\nimport { compareSelector } from 'src/app/core/selectors/selectors';\nimport { AddToCompareAction, RemoveFromCompareAction, ClearAllCompareAction } from 'src/app/core/actions/actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"ngx-toastr\";\nexport let CompareService = /*#__PURE__*/(() => {\n  class CompareService {\n    constructor(store, toastrService) {\n      this.store = store;\n      this.toastrService = toastrService;\n      this.compareItems = [];\n      this.compareStream = new BehaviorSubject([]);\n      this.compareQty = new BehaviorSubject(0);\n      store.pipe(select(compareSelector)).subscribe(items => {\n        this.compareItems = items;\n        this.compareStream.next(items);\n        this.compareQty.next(items.length);\n      });\n    }\n    // Product added to Compare\n    addToCompare(product) {\n      if (this.compareItems.findIndex(item => item.id === product.id) === -1) {\n        this.store.dispatch(new AddToCompareAction({\n          product\n        }));\n        this.toastrService.success('Product added to Compare.');\n      }\n    }\n    // Product removed from Compare\n    removeFromCompare(product) {\n      this.store.dispatch(new RemoveFromCompareAction({\n        product\n      }));\n      this.toastrService.error('Product removed from Compare.');\n    }\n    // Remove all products from Compare\n    clearAllCompare() {\n      this.store.dispatch(new ClearAllCompareAction({}));\n    }\n    // Check whether product is in Compare or not\n    isInCompare(product) {\n      return this.compareItems.find(item => item.id == product.id) ? true : false;\n    }\n    static {\n      this.ɵfac = function CompareService_Factory(t) {\n        return new (t || CompareService)(i0.ɵɵinject(i1.Store), i0.ɵɵinject(i2.ToastrService));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: CompareService,\n        factory: CompareService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return CompareService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}